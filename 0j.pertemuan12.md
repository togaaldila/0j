# Pertemuan ke 12 : Praktik Sensor DHT11, LCD, dan RTC!


## Topik Bahasan
Proyek Dasar Internet of Things I (Praktik Pemrograman Mikrokontroler, Praktik Sensor: Sensor DHT11, LCD dan Kipas, Praktik Sensor: Ultrasonic, PIR, dan LDR, Praktik Aktuator: LED dan Relay, Praktik Aktuator: Buzzer dan Servo)

## Deskripsi
- Mampu melakukan instalasi, memahami bahasa pemrograman dan pin pada Arduino. 
- Mampu melakukan uji coba serial monitor dan uji coba PWM dengan potensiometer.
- Mampu merancang dan membuat proyek menggunakan sensor DHT22.
- Mampu merancang dan membuat proyek menggunakan sensor Ultrasonic, PIR, dan LDR.
- Mampu merancang dan membuat proyek menggunakan aktuator LED dan Relay.
- Mampu merancang dan membuat proyek menggunakan aktuator Buzzer dan Servo.

## Teori Singkat

### Sensor Suhu dan Kelembaban

Salah satu sensor diantara sensor-sensor yang lain adalah sensor suhu dan kelembaban. Sensor ini digunakan untuk mengambil data suhu pada lingkungan tertentu beserta tingkat kelembabannya. Salah satu sensor tersebut yang banyak digunakan adalah DHT11 karena secara biaya sangat minim serta mudah digunakan.

Jenis sensor lain yang memiliki fungsi yang sama adalah DHT22, yang membedakan dari tipe ini adalah keakuratan dalam mengambil data suhu dan kelembaban dan juga lama atau jeda dalam pengambilan sampling. DHT22 mengambil sampling setiap 2 detik, sedangkan DHT11 setiap 1 detik. Tentunya DHT22 lebih baik dibandingkan dengan versi terdahulunya, DHT11.

**Spesifikasi sensor DHT11**

| Nama                 | Nilai                       |
| -------------------- | --------------------------- |
| Tegangan             | 3,5 V - 5,5 V               |
| Arus                 | 0,3 mA                      |
| Jangkauan Suhu       | 0 - 50 derajat Celsius      |
| Jangkauan Kelembaban | 20%-90%                     |
| Akurasi Pengukuran   | +- 2 derajat Celsius (Suhu) |
|                      | 5% (Kelembaban)             |

**Spesifikasi sensor DHT22**

| Nama                 | Nilai                         |
| -------------------- | ----------------------------- |
| Tegangan             | 3,5 V - 5,5 V                 |
| Arus                 | 0,3 mA                        |
| Jangkauan Suhu       | -40 - 80 derajat Celsius      |
| Jangkauan Kelembaban | 0% - 100%                     |
| Akurasi Pengukuran   | +- 0.5 derajat Celsius (Suhu) |
|                      | 2 - 5% (Kelembaban)           |

Sumber: https://learn.adafruit.com/dht

Struktur pin pada sensor DHT11 seperti berikut, sebenarnya sama dengan DHT22. Perbedaannya adalah jika DHT22 biasanya penutup menggunakan warna putih.

![img.png](img.png)  

Dari gambar di atas terlihat bahwa terdapat 3 kaki yang masing-masing memiliki fungsi dan peran masing-masing adalah sebagai berikut;

1. `VCC` digunakan untuk memberikan tegangan pada sensor, pada esp dihubungkan pada pin Vin atau 3v3.
2. `Data` digunakan untuk menghubungkan hasil pembacaan data dari nilai suhu atau kelembaban pada sensor, dihubungkan pin tertentu yang tersedia.
3. `Ground` dihubungkan pada pin GND pada esp.

### Praktikum 1: Sensor DHT Arduino dengan Wokwi

Selesaikan langkah-langkah praktikum berikut ini menggunakan Wokwi di browser Anda.

1. Masuk ke Wokwi. Klik New Projects untuk membuat projek baru. Pilih Arduino UNO.

![img1.png](img1.png) 

2. Tambahkan library “DHT sensor library” pada Library Manager. Pastikan library sudah muncul pada Project Libraries.

![img2.png](img2.png) 

3. Tambahkan sensor suhu DHT22 dengan klik Add.

![img3.png](img3.png) 
   
4. Tambahkan kode program. Pastikan DHT_PIN adalah 2

```cpp
#include "DHT.h"

#define DHTPIN 2 

#define DHTTYPE DHT22   

DHT dht(DHTPIN, DHTTYPE);

void setup() {
  Serial.begin(9600);
  Serial.println(F("DHT22 test!"));

  dht.begin();
}

void loop() {
// Wait a few seconds between measurements.
  delay(2000);

  float temperature = dht.readTemperature();
  float humidity = dht.readHumidity();

  // Check if any reads failed and exit early (to try again).
  if (isnan(temperature) || isnan(humidity)) {
    Serial.println(F("Failed to read from DHT sensor!"));
    return;
  }
  Serial.print(F("Humidity: "));
  Serial.print(humidity);
  Serial.print(F("%  Temperature: "));
  Serial.print(temperature);
  Serial.println(F("°C "));
}
```

5. Jalankan simulasi program dengan klik Run. Pastikan hasil pembacaan sensor suhu muncul di bagian bawah (serial monitor). Ubah nilai suhu dengan klik sensor DHT22, atur suhu dan kelembaban. Jika nilai pembacaan sensor pada serial monitor berubah, berarti pemrograman sensor DHT22 sudah berjalan dengan baik.
Klik Stop simulation untuk menghentikan simulasi

![img4.png](img4.png) 



### Praktikum 2: Praktik LCD, DHT Arduino dengan Wokwi

Selesaikan langkah-langkah praktikum berikut ini menggunakan Wokwi di browser Anda.

1. Masuk ke Wokwi. Klik New Projects untuk membuat projek baru. Pilih Arduino UNO.

![img1.png](img1.png) 

2. Tambahkan library “LiquidCrystal I2C” pada Library Manager. Pastikan library sudah muncul pada Project Libraries.

![img5.png](img5.png)

3. Tambahkan kode program seperti berikut. Pastikan SDA(A4) dan SCL(A5) sudah sesuai.

![img6.png](img6.png)

![img7.png](img7.png)

4. Jalankan simulasi program dengan klik Run. Untuk menampilkan data pada sebuah LCD diwakili dengan baris dan kolom, yang dimulai dari baris ke 0 dan kolom ke 0. Banyaknya data yang bisa ditampilkan tergantung dari spesifikasi LCD, misalkan 16x2 berarti hanya bisa menampilkan 32 digit atau karakter. Klik Stop simulation untuk menghentikan simulasi

![img8.png](img8.png)







## Praktikum Flashing MicroPython Firmware(optional)
+ Kunjungi situs micropython dan download firmware esp32 - https://micropython.org/download/ESP32_GENERIC/

![img18.png](img18.png)
  
+ Hubungkan ESP32 board ke  computer. Buka Thonny IDE. Tools > Options > Interpreter. Pilih Interpreter yang akan digunakan pada board, pilih COM port kemudian pilih Install or Update Firmware.

![img19.png](img19.png)

+ Pilih port sekali lagi. Pilih lokasi firmware yang sudah didownload. Tools > Options > Interpreter. Pilih pengaturan seperti pada gambar dan klik Install.

![img20.png](img20.png)

+ Thonny dan board siap digunakan, bisa dicoba dengan ketik help.

![img21.png](img21.png)


### Praktikum Dasar Menyalakan dan mematikan LED

+ Duplikasi code berikut

![img22.png](img22.png)

+ LED nyala dan mati

![img23.png](img23.png)

### Praktikum PWM Dim LED dengan Micropython

+ Buat skenario seperti gambar

![img24.png](img24.png)

+ Untuk membuat objek PWM, Anda perlu memasukkan parameter, pin yang terhubung dengannya, frekuensi sinyal, dan siklus kerja.

- Frekuensi: Frekuensi dapat berupa nilai antara 0 dan 78125. Frekuensi 5000 Hz dapat digunakan untuk mengontrol kecerahan LED.
-Siklus kerja(Duty cycle): Siklus kerja dapat berupa nilai antara 0 dan 1023. Dimana 1023 menunjukkan siklus kerja 100% (kecerahan penuh), dan 0 menunjukkan siklus kerja 0% (LED tidak menyala).

+ Duplikasi code berikut

```python
from machine import Pin, PWM 
from time import sleep

frequency = 5000
led = PWM(Pin(5), frequency) 

while True:
  for duty_cycle in range(0, 1024):
    led.duty(duty_cycle)
    sleep(0.005)
```

+ Hasilnya seharusnya led berganti tingkat terangnya.
https://www.youtube.com/shorts/FfVE_UA46Eg

  
## Tugas Mandiri 
Selesaikan langkah-langkah praktikum berikut ini menggunakan Tinkercad di browser Anda.

**Tugas 1**
- Tambahkan 1 buah LED. Buatlah program agar nyala kedua LED berlawanan saat potensiometer diubah nilainya.
  
![img12.png](img12.png)

**Tugas 2**
- Lakukan seperti tugas 1, dengan mengubah board ke esp32!
